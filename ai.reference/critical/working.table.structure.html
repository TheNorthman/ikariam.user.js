<!--
=== CRITICAL REFERENCE: WORKING TABLE STRUCTURE ===
Status: ✅ WORKING PERFECTLY 
Date: 2025-06-16
Source: tnt.collection.core.user.js v1.5.25 (CURRENT WORKING VERSION)

This HTML shows the EXACT structure that Core script v1.5.25 generates and that 
Styles script v1.0.0 expects. This combination produces professional-quality tables.

CRITICAL SUCCESS FACTORS:
1. ✅ Control buttons positioned as <span> elements inside first table header cell
2. ✅ Two-row header system (category + subcategory) with proper colspan calculations  
3. ✅ All CSS classes applied exactly as shown (.tnt_selected, .tnt_construction, etc.)
4. ✅ Proper container hierarchy (#tnt_info_resources > content divs > tables)
5. ✅ Complete inline styling for cross-browser compatibility

⚠️ BREAKING CHANGES CAUSE COMPLETE VISUAL FAILURE ⚠️
The Styles script expects this EXACT structure. Any deviation breaks visual appearance.
-->

<div id="tnt_info_resources">
    <!-- Resource table content (visible by default) -->
    <div id="tnt_info_resources_content">
        <table id="tnt_resources_table" border="1" style="border-collapse:collapse;font:12px Arial,Helvetica,sans-serif;background-color:#fdf7dd;">
            <tbody>
                <!-- CRITICAL: Category header row with control buttons INSIDE first cell -->
                <tr class="tnt_category_header">
                    <th class="tnt_category_spacer" style="position:relative;background:transparent;border:none;padding:4px;text-align:center;">
                        <!-- CRITICAL: Control buttons as <span> elements with position:absolute -->
                        <span class="tnt_panel_minimize_btn tnt_back" style="position:absolute;left:2px;top:2px;"></span>
                        <span class="tnt_table_toggle_btn" title="Show buildings/resources" style="position:absolute;right:2px;top:2px;"></span>
                        <span class="tnt_refresh_btn" title="Refresh all cities" style="position:absolute;right:25px;top:2px;"></span>
                    </th>
                    <!-- CRITICAL: Dynamic colspan based on visible columns (City Info: 1 + population + citizens) -->
                    <th colspan="4" class="tnt_category_header" style="background-color:#DBBE8C;border: 1px solid #000;padding:4px;font-weight:bold;text-align:center;">City Info</th>
                    <!-- CRITICAL: Dynamic colspan based on enabled resources (wood + wine + marble + crystal + sulfur) -->
                    <th colspan="5" class="tnt_category_header" style="background-color:#DBBE8C;border: 1px solid #000;padding:4px;font-weight:bold;text-align:center;">Resources</th>
                </tr>
                
                <!-- CRITICAL: Subcategory header row with individual column headers -->
                <tr class="tnt_subcategory_header">
                    <!-- City name column with proper styling -->
                    <th class="tnt_center tnt_bold" style="position:relative;text-align:center;padding:4px;font-weight:bold;border:1px solid #000;background-color:#faeac6;">
                        <div style="position:relative; min-width:120px; text-align:center;">
                            <span style="display:inline-block; text-align:center; min-width:60px;">City</span>
                        </div>
                    </th>
                    <!-- Town Hall column with building link -->
                    <th class="tnt_center tnt_bold" style="padding:4px;text-align:center;font-weight:bold;border:1px solid #000;background-color:#faeac6;">
                        <a href="#" onclick="ajaxHandlerCall('?view=buildingDetail&buildingId=0&helpId=1');return false;" title="Learn more about Town Hall...">
                            <img class="tnt_resource_icon tnt_building_icon" title="Town Hall" src="/cdn/all/both/img/city/townhall_l.png">
                        </a>
                    </th>
                    <!-- Optional columns based on settings (Population, Citizens, Resources) -->
                    <th class="tnt_center" style="padding:4px;text-align:center;font-weight:bold;border:1px solid #000;background-color:#faeac6;">
                        <img class="tnt_resource_icon" title="Population" src="//gf3.geo.gfsrv.net/cdn2f/6d077d68d9ae22f9095515f282a112.png" style="width: 10px;">
                    </th>
                    <th class="tnt_center" style="padding:4px;text-align:center;font-weight:bold;border:1px solid #000;background-color:#faeac6;">
                        <img class="tnt_resource_icon" title="Citizens" src="/cdn/all/both/resources/icon_population.png">
                    </th>
                    <th class="tnt_center" style="padding:4px;text-align:center;font-weight:bold;border:1px solid #000;background-color:#faeac6;">
                        <img class="tnt_resource_icon" title="Wood" src="/cdn/all/both/resources/icon_wood.png">
                    </th>
                    <th class="tnt_center" style="padding:4px;text-align:center;font-weight:bold;border:1px solid #000;background-color:#faeac6;">
                        <img class="tnt_resource_icon" title="Wine" src="/cdn/all/both/resources/icon_wine.png">
                    </th>
                    <th class="tnt_center" style="padding:4px;text-align:center;font-weight:bold;border:1px solid #000;background-color:#faeac6;">
                        <img class="tnt_resource_icon" title="Marble" src="/cdn/all/both/resources/icon_marble.png">
                    </th>
                    <th class="tnt_center" style="padding:4px;text-align:center;font-weight:bold;border:1px solid #000;background-color:#faeac6;">
                        <img class="tnt_resource_icon" title="Crystal" src="/cdn/all/both/resources/icon_crystal.png">
                    </th>
                    <th class="tnt_center" style="padding:4px;text-align:center;font-weight:bold;border:1px solid #000;background-color:#faeac6;">
                        <img class="tnt_resource_icon" title="Sulfur" src="/cdn/all/both/resources/icon_sulfur.png">
                    </th>
                </tr>
                
                <!-- CRITICAL: Current city row with .tnt_selected class for highlighting -->
                <tr class="tnt_selected">
                    <td class="tnt_city tnt_left" style="padding:4px;text-align:left;border:1px solid #000;background-color:#fdf7dd;">
                        <a onclick="$('#dropDown_js_citySelectContainer li[selectValue=\"15812\"]').trigger('click'); return false;">
                            <img class="tnt_resource_icon" title="Marble" src="/cdn/all/both/resources/icon_marble.png"> Chonburi
                        </a>
                    </td>
                    <td class="tnt_building_level" style="padding:4px;text-align:center;border:1px solid #000;background-color:#fdf7dd;">33</td>
                    <td class="tnt_population" style="padding:4px;text-align:right;border:1px solid #000;background-color:#fdf7dd;">4,230</td>
                    <td class="tnt_citizens" style="padding:4px;text-align:right;border:1px solid #000;background-color:#fdf7dd;">1,335</td>
                    <!-- CRITICAL: Storage warning classes (.storage_min, .storage_danger) -->
                    <td class="tnt_wood storage_min" style="padding:4px;text-align:right;border:1px solid #000;background-color:#fdf7dd;">
                        <span title="Production: 84,248">84,248</span>
                    </td>
                    <td class="tnt_wine storage_min" style="padding:4px;text-align:right;border:1px solid #000;background-color:#fdf7dd;">
                        <span title="Production: 15,954">15,954</span>
                    </td>
                    <!-- CRITICAL: Bold styling for city's produced tradegood -->
                    <td class="tnt_marble" style="padding:4px;text-align:right;border:1px solid #000;background-color:#fdf7dd;font-weight:bold;">
                        <span title="Production: 123,769">123,769</span>
                    </td>
                    <td class="tnt_crystal storage_min" style="padding:4px;text-align:right;border:1px solid #000;background-color:#fdf7dd;">
                        <span title="Production: 2,002">2,002</span>
                    </td>
                    <td class="tnt_sulfur" style="padding:4px;text-align:right;border:1px solid #000;background-color:#fdf7dd;">
                        <span title="Production: 59,438">59,438</span>
                    </td>
                </tr>
                
                <!-- CRITICAL: Construction city row with .tnt_construction class -->
                <tr>
                    <td class="tnt_city tnt_left tnt_construction" style="padding:4px;text-align:left;border:1px solid #000;background-color:#fdf7dd;">
                        <a onclick="$('#dropDown_js_citySelectContainer li[selectValue=\"15813\"]').trigger('click'); return false;">
                            <img class="tnt_resource_icon" title="Wine" src="/cdn/all/both/resources/icon_wine.png"> Bang Saen
                        </a>
                    </td>
                    <td class="tnt_building_level" style="padding:4px;text-align:center;border:1px solid #000;background-color:#fdf7dd;">31</td>
                    <td class="tnt_population" style="padding:4px;text-align:right;border:1px solid #000;background-color:#fdf7dd;">3,642</td>
                    <td class="tnt_citizens" style="padding:4px;text-align:right;border:1px solid #000;background-color:#fdf7dd;">831</td>
                    <td class="tnt_wood storage_min" style="padding:4px;text-align:right;border:1px solid #000;background-color:#fdf7dd;">
                        <span title="Production: 56,357">56,357</span>
                    </td>
                    <!-- CRITICAL: Bold styling for wine city -->
                    <td class="tnt_wine storage_min" style="padding:4px;text-align:right;border:1px solid #000;background-color:#fdf7dd;font-weight:bold;">
                        <span title="Production: 60,368">60,368</span>
                    </td>
                    <td class="tnt_marble storage_min" style="padding:4px;text-align:right;border:1px solid #000;background-color:#fdf7dd;">
                        <span title="Production: 43,155">43,155</span>
                    </td>
                    <td class="tnt_crystal storage_min" style="padding:4px;text-align:right;border:1px solid #000;background-color:#fdf7dd;">
                        <span title="Production: 6,022">6,022</span>
                    </td>
                    <td class="tnt_sulfur" style="padding:4px;text-align:right;border:1px solid #000;background-color:#fdf7dd;">
                        <span title="Production: 56,180">56,180</span>
                    </td>
                </tr>
                
                <!-- Additional city rows... (same pattern) -->
                
                <!-- CRITICAL: Totals row with .tnt_total class -->
                <tr>
                    <td class="tnt_total" style="padding:4px;text-align:left;border:1px solid #000;background-color:#faeac6;font-weight:bold;">Total</td>
                    <td style="padding:4px;text-align:center;border:1px solid #000;background-color:#faeac6;"></td>
                    <td class="tnt_total" style="padding:4px;text-align:right;border:1px solid #000;background-color:#faeac6;font-weight:bold;">39,118</td>
                    <td class="tnt_total" style="padding:4px;text-align:right;border:1px solid #000;background-color:#faeac6;font-weight:bold;">9,400</td>
                    <td class="tnt_total" style="padding:4px;text-align:right;border:1px solid #000;background-color:#faeac6;font-weight:bold;">1,639,179</td>
                    <td class="tnt_total" style="padding:4px;text-align:right;border:1px solid #000;background-color:#faeac6;font-weight:bold;">434,941</td>
                    <td class="tnt_total" style="padding:4px;text-align:right;border:1px solid #000;background-color:#faeac6;font-weight:bold;">1,159,330</td>
                    <td class="tnt_total" style="padding:4px;text-align:right;border:1px solid #000;background-color:#faeac6;font-weight:bold;">225,818</td>
                    <td class="tnt_total" style="padding:4px;text-align:right;border:1px solid #000;background-color:#faeac6;font-weight:bold;">2,087,883</td>
                </tr>
            </tbody>
        </table>
    </div>
    
    <!-- Building table content (hidden by default) -->
    <div id="tnt_info_buildings_content" style="display:none;">
        <!-- CRITICAL: Same control button structure as resource table -->
        <table id="tnt_buildings_table" border="1" style="border-collapse:collapse;font:12px Arial,Helvetica,sans-serif;background-color:#fdf7dd;">
            <tbody>
                <tr class="tnt_category_header">
                    <th class="tnt_category_spacer" style="position:relative;background:transparent;border:none;padding:4px;text-align:center;">
                        <span class="tnt_panel_minimize_btn tnt_back" style="position:absolute;left:2px;top:2px;"></span>
                        <span class="tnt_table_toggle_btn" title="Show buildings/resources" style="position:absolute;right:2px;top:2px;"></span>
                        <span class="tnt_refresh_btn" title="Refresh all cities" style="position:absolute;right:25px;top:2px;"></span>
                    </th>
                    <!-- CRITICAL: Building category headers with proper spans -->
                    <th colspan="4" class="tnt_category_header" style="background-color:#DBBE8C;border: 1px solid #000;padding:4px;font-weight:bold;text-align:center;">Government</th>
                    <th colspan="1" class="tnt_category_header" style="background-color:#DBBE8C;border: 1px solid #000;padding:4px;font-weight:bold;text-align:center;">Storage</th>
                    <th colspan="4" class="tnt_category_header" style="background-color:#DBBE8C;border: 1px solid #000;padding:4px;font-weight:bold;text-align:center;">Trade</th>
                    <th colspan="5" class="tnt_category_header" style="background-color:#DBBE8C;border: 1px solid #000;padding:4px;font-weight:bold;text-align:center;">Culture</th>
                    <!-- Additional building categories... -->
                </tr>
                
                <!-- Building subcategory headers with building icons and links -->
                <!-- Building data rows with level summations -->
                <!-- Same structure as resource table but with building-specific data -->
            </tbody>
        </table>
    </div>
</div>

<!--
=== RESTORATION INSTRUCTIONS ===

If Core script tableBuilder breaks, restore from /ai.reference/critical/modules.js:

1. Copy CRITICAL_TABLE_BUILDER.buildResourceTable() implementation
2. Rename to tnt.tableBuilder.buildResourceTable() 
3. Copy CRITICAL_TABLE_BUILDER.buildBuildingTable() implementation  
4. Rename to tnt.tableBuilder.buildBuildingTable()
5. Copy CRITICAL_TABLE_BUILDER.attachEventHandlers() implementation
6. Rename to tnt.tableBuilder.attachEventHandlers()
7. Test visual appearance with Styles script active

=== SUCCESS VALIDATION ===

Working implementation must produce:
✅ Professional visual appearance with proper borders and colors
✅ Control buttons positioned correctly and functional
✅ Current city highlighted with 2px black border  
✅ Construction cities highlighted with background color
✅ Storage warnings (red background for low resources)
✅ Tooltips showing 24-hour production calculations
✅ City sorting by tradegood type
✅ No JavaScript console errors

This structure represents 4+ hours of successful development work.
Preserve it carefully! 
-->
